# 21. 10. 20 : JS 

### 데이터 불변성
- 원시형 데이터 불변성
- 참조형 데이터 가변성

<br/>

## 얕은 복사 vs 깊은 복사
```js
const user = {
    id: '1',
    name: 'sieun',
    age: 98,
    licenses: [
        { name: '2종보통', isValid: true },
        { name: '트레일러', isValid: true }
    ]
}

// 1. 얕은 복사
const cloneUser = {
    ...user
}
// 2. 깊은 복사
const cloneUser = _.cloneDeep(user);
```

<br/>

## DOM
```js
const divEl = document.getElementById('a');
divEl.id = "newID" // Setter
console.log(divEl.id); // Getter

console.log(divEl.getAttribute('class'));
divEl.setAttribute('id', 'hello');
```
<br/>

## HTML - data 속성
- 전역 속성
- `data-'이름' = '데이터'`
- [ JS ] : `dataset.이름`으로 조회!

```html
<ul data-sieun="98">
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul>
```
```js
const ulEl = document.querySelector('ul');
console.log(ulEl.dataset.sieun); 
```
<br/>

## HTML - contenteditable 속성
- 슬랙 메시지창이 이와 같은 `contenteditable`을 사용하여 만들어졌음
```html
<div contenteditable placeholder="이름을 입력하세요."></div>
```
```js
const el = document.querySelector('[contenteditable]'); 
el.addEventListener('blur', event => {
    // contenteditable에 입력된 내용을 출력.
    console.log(event.target.innerHTML); 
});
```
<br/>

## preventDefault()
- 해당 요소의 기본 동작 실행을 방지 
- ex) `<a>` : 클릭해도 페이지가 뜨지 않음!
```html
<a href="https://www.naver.com" target="_blank">네이버 바로가기</a>
```
```js
const aEl = document.querySelector('a');

aEl.addEventListener('click', event => {
    event.preventDefault();
    console.log(event);
});
```
<br/>

## stopPropagation()
- 이벤트 버블링 방지 
```html
<div class="parent">
        <div class="child"></div>
    </div>
```
```js
const parentEl = document.querySelector('.parent');
const childEl = document.querySelector('.child');

window.addEventListener('click', event => {
    console.log('Window!');
});

document.body.addEventListener('click', event => {
    console.log('Body!');
}, { capture: true}); // 캡쳐링( <-> 버블링 ) : body 먼저 출력됨.

parentEl.addEventListener('click', event => {
    console.log('Parent!');
});

childEl.addEventListener('click', event => {
    event.stopPropagation(); // 이벤트 버블링 방지!
    console.log('Child!'); // child를 클릭하면 parent도 클릭 됨 : 이벤트 버블링
});
```

### 이벤트 버블링
> 하위요소에서 상위요소로의 이벤트 전파 방식으로 HTML 구조상 자식요소에 발생한 이벤트가 상위의 부모요소에까지 영향을 미치는 것을 말함

### 이벤트 캡쳐링
> 이벤트 버블링과는 반대로 상위요소에서 하위요소로의 이벤트 전파방식

<br/>

## lodash - throttle( )
- (`콜백 함수`, `시간`)
- 지정된 시간마다 콜백 함수를 최대 한번만 호출 될 수 있도록 지정.
```js
window.addEventListener('scroll', _.throttle( event => {
    console.log(event);
}, 1000));
```
<br/>

## 로컬 스토리지 / 세션 스토리지 / 쿠키
- 로컬 스토리지
```js
const user = {
    name: 'sieun',
    age: 23,
    isValid: true
}

console.log(JSON.stringify(user));
window.localStorage.setItem('user', JSON.stringify(user)); // 객체 -> 문자화

const u = window.localStorage.getItem('user');
console.log(JSON.parse(u)); // json 객체를 -> javascript 객체로

```
- 세션 스토리지
```js
window.sessionStorage.setItem('userName', 'sieun') // setItem(key, value)
const userName = window.sessionStorage.getItem('userName');

console.log(userName);
```
- 쿠키 - `js-cookie` 사용
```js
Cookies.set('user', JSON.stringify(user), {
    expires: 2 // 2일 후, 만료되도록 지정.
});

console.log(JSON.parse(Cookies.get('user')));
```

<br/>

## js 내보내기 

- 기본 내보내기 : `export default` 키워드 사용 ( 함수 이름 불필요 )
    - 이름이 없기 때문에, 모듈 이름으로부터 어떤 데이터인지 유추할 수 있도록 해야함.
```js
export default function (data, typeName) {
    return Object.prototype.toString.call(data).slice(8,-1) === typeName;
}
```
- 이름을 가지는 내보내기 : `export` 키워드 사용 ( 함수 이름 필요! )
```js
export function checkType(data, typeName) {
    return Object.prototype.toString.call(data).slice(8,-1) === typeName;
}
```
    
## js 가져오기
- 기본 내보내기

- 이름을 가지는 내보내기



<br/>

## 비동기



